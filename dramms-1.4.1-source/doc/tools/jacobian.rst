.. raw:: html

   <!--

   ============================================================================

      DO NOT EDIT THIS FILE! It was generated using Sphinx from:

      Origin:   $URL: https://sbia-svn.uphs.upenn.edu/projects/DRAMMS/branches/dramms-1.4/doc/tools/jacobian.rst $
      Revision: $Rev: 1900 $

   ============================================================================

   -->

.. title:: Calculate Jacobian Determinant Maps from DRAMMS Deformations


..  _JacobianCalculation:

Calculate Jacobian Determinant Map
==================================

The Jacobian determinate is an indicator for the volumetric change at a voxel. It encodes how each voxel
has deformed in term of its volumetric change. Its value is greater than 1 if there is volume expansion,
1 if volume preservation, and less than 1 if volume contraction, 0 if volume vanish, and less than 0
if this region/voxel has been deformed into other regions/voxels, which is usually undesirable.

There are two ways to calculate the Jacobian Determinant map of a deformation --- a stand-alone command, or as part of the main ``dramms`` script.


Option 1: using a stand-alone command
-------------------------------------

The first option is via a stand-alone command named ``dramms-jacobian``. We recommend this option if you have already obtained a deformation. ::

    dramms-jacobian  def.nii.gz  outputJacDet.hdr

	
.. raw:: html

    <br />
	

Option 2: using the main `dramms` command
------------------------------------------

The second option is suitable if you don't have a deformation yet, but want to output the Jacobian Determinant map during
(or more precisely, right after) the calculation of the deformation. In other words, a user may only have two input images, and want to output the Jacobian Determinant map during registration.

In this case, use the ``-J`` option of the main ``dramms`` command::

    dramms -S A.hdr       -T B.hdr 
           -O A2B.hdr     -D def.nii.gz 
           -J jacdet.hdr


.. raw:: html

    <br />
	<br />
		   
.. note::

   The Jacobian Determinant map is always in the target image space (i.e., the space of B.hdr in the above example).
